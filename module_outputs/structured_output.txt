In Langchain, structured output refers to the practice of having language models return responses in a well defined data format (for example JSON), rather than free-form text. This makes the model output easier to parse and work with programmatically.

Why do we need structured output

1. Data Extraction
2. API building
3. Agents

Ways to get structured output

There are two types of model in Langchain:
1. Can generate structured output - (with_structure_output())
2. Cannot generate structured output - Output_parsers

with_structure_output -> data format
model.invoke()

- TypedDict
- Pydantic
- json_schema

TypedDict - TypedDict is a way to define a dictionary in python where you specify what keys and values should exists. It helps ensure that your dictionary follows a specific structure.

why use TypedDict?
- It tells python what keys are required and what type of values they should have.
- It does not validate data at runtime (It just helps type hints for better coding).

When you use with_structure_output internally It adds in prompt that - You are an AI assistant that extracts structured insights from text. Given a product review, extract: - Summary: A brief overview of the main points. - Sentiment: Overall tone of the review (positive, neutral, negative). Return the response in JSON format.

Pydantic 

Pydantic is a data validation and data parsing library for python. It ensures that the data you work with is correct, structured and type safe.

Use TypedDict if : 
- You only need type hints (basic structure enforcement)
- you don't need validation (e.g checking numbers are positive)
- You trust the LLM to return the correct Data

Use Pydantic if:
- You need data validation (e.g Sentiment must be "positive", "negative", "neutral")
- You need default values if the LLM missed the field
- You want automatic type conversion (e.g "100" -> 100)

Use JSON Schema if: 
- You don't want to import extra python library (e.g Pydantic)
- You need validation but don't need python objects
- You want to define structure in a standard JSON format